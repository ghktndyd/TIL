## 동시성

- 여러 작업이 특정한 순서가 없이 **동시에 실행되는 것처럼** 보이는 성질
- "동시에 실행되는 것처럼 보인다" 라는 문장이 중요한데 실제로는 CPU가 매우 빠르게 **컨텍스트 스위칭**을 하면서 각 작업이 조금씩 실행되고 있는 것
- 그래서 CPU가 멀티 코어가 아니라 싱글 코어여도 가능
- 동시성의 목표는 응답성을 향상시킨다는 것에 목표를 둔다.
- 한마디로 동시성은 CPU가 한 번에 얼마나 많은 일을 처리하는지에 대해서 중점을 둔다.
  - 응답성: 얼마나 빨리 응답하느냐?
  - 예를 들어서 웹페이지에서 버튼을 클릭했을 때 응답까지 걸리는 시간

---

## 병렬성

- 여러 작업이 "실제로 물리적으로 동시에 실행"되는 성질
- 동시에 실행되어야 하기 때문에 반드시 CPU는 1개 이상이어야 됨
- 각 작업이 서로 다른 CPU에서 **동시에** 처리된다.
- 병렬성은 처리량 향상에 목표를 둔다.
  - 처리량: 일정 시간동안 처리할 수 있는 작업의 총량
  - 예를 들어서 초당 1,000개의 요청을 처리할 수 있는 서버

---

## 비교하자면

- **동시성(Concurrency)**
  - 한 번에 하나의 작업만 하는 것은 맞지만, 빠른 속도로 전환해가며 여러 작업에 대해서 조금씩이라도 응답한다.
  - 사용자 입장에서는 이런 상황이 "대기시간이 줄었다" 라고 느끼기에 응답성이 좋아진다.
  - 전체 처리 속도가 빨라진 것은 아니다. 하지만 빠른 피드백을 준다.

- 동시성 내부 동작은 컨텍스트 스위칭
  - OS의 스케줄러가 타임 슬라이스 단위로 작업을 전환한다.
  - 프로세스/스레드의 상태(레지스터, 프로그램 카운터 등등)을 저장하고 다른 작업으로 전환한다.
  - 여기서 전환할 때 비용이 발생하기 때문에 너무 많이 전환하면 성능이 안 좋다고 느낀다.

- **병렬성(Parallelism)**
  - 여러 작업을 진짜로 동시에 처리한다. 그러니까 같은 시간에 더 많은 처리량을 끝낸다.
  - 처리 가능한 총량이 늘어났기 때문에 처리량이 향상됐다 라고 말한다.

- 병렬성은 멀티코어가 실행
  - 2개 이상의 코어가 서로 다른 작업을 진짜로 동시에 한다.
  - **데이터 병렬성**: 데이터를 나누어서 각 코어가 같은 작업을 수행하는 형태
  - **태스크 병렬성**: 서로 다른 작업을 각 코어가 수행

- 사실 두 개념은 혼합해서 사용함.
- 요즘 서버들은 멀티코어 CPU다. 싱글코어는 진짜 찾기가 어렵다.
- 또 현대 서버의 요구사항은
- 사용자 응답을 빨라야 하고, 대규모 데이터 요청도 감당이 가능해야 한다.
- 동시성만 잘 다룬다면? 응답은 빠른데 대규모 작업량 처리는 한계가 생긴다.
- 병렬성만 잘 다룬다면? 한 번에 많은 일을 처리하긴 하는데 요청 사이에 빠른 피드백은 어렵다.
